# í•´ì‰¬ ì—†ëŠ” í…Œì´ë¸”ì˜ ë¬¸ì œì 
```c
#include <stdio.h>

typedef struct _empInfo
{
	int empNum; // ì§ì›ì˜ ê³ ìœ ë²ˆí˜¸
	int age;    // ì§ì›ì˜ ë‚˜ì´
} EmpInfo;

int main()
{
	EmpInfo empInfoArr[1000];
	EmpInfo ei;
	int eNum;

	printf("ì‚¬ë²ˆê³¼ ë‚˜ì´ ì…ë ¥: ");
	scanf("%d %d", &(ei.empNum), &(ei.age));
	empInfoArr[ei.empNum] = ei;

	printf("í™•ì¸í•˜ê³ í”ˆ ì§ì›ì˜ ì‚¬ë²ˆ ì…ë ¥: ");
	scanf("%d", &eNum);

	ei = empInfoArr[eNum];
	printf("ì‚¬ë²ˆ: %d, ë‚˜ì´: %d \n", ei.empNum, ei.age);
	return 0;
}
```
ìœ„ì˜ ì½”ë“œëŠ” ë°°ì—´ì„ ê¸°ë°˜ìœ¼ë¡œ ë§Œë“  í…Œì´ë¸” ìë£Œêµ¬ì¡°ì´ë‹¤.   
í•˜ì§€ë§Œ ë¬¸ì œì ì´ ìˆë‹¤. ë§Œì•½ ì‚¬ë²ˆì˜ ë²”ìœ„ê°€ 10000~999999ë¼ë©´, ë§¤ìš° í° ë°°ì—´ì´ í•„ìš”í•  ê²ƒì´ë‹¤.

ì´ëŸ¬í•œ ë¬¸ì œë¥¼ í•´ê²°í•´ì£¼ê¸° ìœ„í•´ 'í•´ì‰¬'ê°€ í•„ìš”í•˜ë‹¤.

# í•´ì‰¬ í…Œì´ë¸” ê·¸ë¦¬ê³  ì¶©ëŒ
```c
#include <stdio.h>

typedef struct _empInfo
{
	int empNum; // ì§ì›ì˜ ê³ ìœ ë²ˆí˜¸
	int age;    // ì§ì›ì˜ ë‚˜ì´
} EmpInfo;

int GetHashValue(int empNum)
{
	return empNum % 100;
}

int main()
{
	EmpInfo empInfoArr[100];

	EmpInfo emp1 = { 20120003, 42 };
	EmpInfo emp2 = { 20130012, 33 };
	EmpInfo emp3 = { 20170049, 27 };

	EmpInfo r1, r2, r3;

	// í‚¤ë¥¼ ì¸ë±ìŠ¤ ê°’ìœ¼ë¡œ ì´ìš©í•´ì„œ ì €ì¥
	empInfoArr[GetHashValue(emp1.empNum)] = emp1;
	empInfoArr[GetHashValue(emp2.empNum)] = emp2;
	empInfoArr[GetHashValue(emp3.empNum)] = emp3;

	// í‚¤ë¥¼ ì¸ë±ìŠ¤ ê°’ìœ¼ë¡œ ì´ìš©í•´ì„œ íƒìƒ‰
	r1 = empInfoArr[GetHashValue(20120003)];
	r2 = empInfoArr[GetHashValue(20130012)];
	r3 = empInfoArr[GetHashValue(20170049)];

	// íƒìƒ‰ ê²°ê³¼ í™•ì¸
	printf("ì‚¬ë²ˆ %d, ë‚˜ì´ %d \n", r1.empNum, r1.age);
	printf("ì‚¬ë²ˆ %d, ë‚˜ì´ %d \n", r2.empNum, r2.age);
	printf("ì‚¬ë²ˆ %d, ë‚˜ì´ %d \n", r3.empNum, r3.age);

	return 0;
}
```
ìœ„ì˜ ì½”ë“œì—ì„œ ì•„ë˜ì˜ í•¨ìˆ˜ëŠ” 'í•´ì‰¬í•¨ìˆ˜'ë¼ê³  ë¶ˆë¦°ë‹¤.   
ì¦‰, "ì—¬ëŸ ìë¦¬ì˜ ìˆ˜ë¡œ ì´ë¤„ì§„ ì§ì›ì˜ ê³ ìœ ë²ˆí˜¸ë¥¼ ë‘ ìë¦¬ì˜ ìˆ˜ë¡œ ë³€ê²½í•œë‹¤."   
ì´ëŠ” í•´ì‰¬ í•¨ìˆ˜ê°€ ì—†ë˜ ë°°ì—´ ê¸°ë°˜ì˜ í…Œì´ë¸”ì´ ê°€ì§€ê³  ìˆë˜ ë¬¸ì œì ì„ í•´ê²°í•´ì¤€ë‹¤.   

```c
int GetHashValue(int empNum)
{
	return empNum % 100;
}
```

í•˜ì§€ë§Œ ì—¬ì „íˆ ë¬¸ì œëŠ” ì¡´ì¬í•œë‹¤.    
`20120003`ê³¼ `20210103`ì˜ ì‚¬ì›ë²ˆí˜¸ë¥¼ ê°–ëŠ” ë‘ ì§ì›ì´ ê°™ì€ í‚¤(03)ë¥¼ ê°€ì§€ê²Œ ëœë‹¤ëŠ” ê²ƒì´ë‹¤.    
ì´ê²ƒì´ ë°”ë¡œ ***ì¶©ëŒ(collision)*** ì´ë‹¤.

# ì–´ëŠ ì •ë„ ê°–ì¶°ì§„ í…Œì´ë¸”ê³¼ í•´ì‰¬ì˜ êµ¬í˜„
ìœ„ì˜ ì½”ë“œì—ì„œ í…Œì´ë¸”ê³¼ í•´ì‰¬ í•¨ìˆ˜ì˜ êµ¬í˜„ì„ ê°„ë‹¨íˆ ë³´ì˜€ì§€ë§Œ, ë¶€ì¡±í•œ ê°ì´ ìˆê¸°ì— ì•„ë˜ì— ì–´ëŠ ì •ë„ ê°–ì¶°ì§„ í…Œì´ë¸”ì„ êµ¬í˜„í•˜ê³ ì í•œë‹¤.   

í•˜ì§€ë§Œ ì—¬ì „íˆ ì¶©ëŒì„ í•´ê²°í•´ì£¼ì§€ëŠ” ëª»í•œë‹¤.

ê·¸ì „ì— `Slot.h`ì˜ ì•„ë˜ì˜ ì½”ë“œë¥¼ ë³´ê³  ì˜ë¬¸ì´ ë“¤ ìˆ˜ë„ ìˆë‹¤.
```c
enum SlotStatus { EMPTY, DELETED, INUSE };
```
"ì–´? `DELETED`ìƒíƒœëŠ” ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ”ê±°ì§€? ì‚­ì œê°€ ë˜ë©´ ì‚­ì œê°€ ëœê±°ì§€, ì™œ ì‚­ì œë˜ì—ˆìŒì„ ì•Œë¦¬ëŠ” ìƒíƒœê°€ ìˆëŠ”ê±°ì§€?"   
ì•„ë˜ì˜ ê·¸ë¦¼ì„ í†µí•´ ì„¤ëª…í•œë‹¤.   

<img src="https://github.com/user-attachments/assets/2f9718e0-5930-4024-a5d5-33abc4c31750" width="400" height="600"/>

ë¬¼ë¡  ì•„ë˜ì˜ ì½”ë“œì—ì„œëŠ” 'ì„ í˜•ì¡°ì‚¬ë²•'ì´ ì ìš©ë˜ì–´ ìˆì§€ëŠ” ì•Šë‹¤.   
ë§Œì•½ í•´ì‰¬ê°’ì´ ê²¹ì¹˜ëŠ” ê°’ì´ ì €ì¥ë˜ë©´ ë§ˆì§€ë§‰ì— ì €ì¥ëœ ê°’ì´ ê¸°ì¡´ì˜ ê°’ì„ ë®ëŠ” ë°©ì‹ìœ¼ë¡œ, ì¶©ëŒì„ ë°©ì§€í•˜ëŠ” ì½”ë“œëŠ” ì•„ë‹ˆë‹¤.   
ë”°ë¼ì„œ íƒìƒ‰ì˜ ê³¼ì •ì—ì„œ `DELETED`ìƒíƒœë¥¼ ì˜ì‹¬í•˜ëŠ” ë°©ì‹ì„ ì·¨í•˜ê³  ìˆì§€ëŠ” ì•Šë‹¤.   

í•˜ì§€ë§Œ `DELETED` ìƒíƒœì˜ ì¡´ì¬ ì´ìœ ë¥¼ ì•Œê³  ìˆìŒì€ ì¤‘ìš”í•˜ë‹¤.

### Person.h
```c
#ifndef __PERSON_H__
#define __PERSON_H__

#define STR_LEN 50

typedef struct _person
{
	int ssn;			 // ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸
	char name[STR_LEN];  // ì´ ë¦„
	char addr[STR_LEN];  // ì£¼ ì†Œ
} Person;

int GetSSN(Person* p);
void ShowPerInfo(Person* p);
Person* MakePersonData(int ssn, char* name, char* addr);

#endif
```

### Person.c
```c
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include "Person.h"


int GetSSN(Person* p)
{
	return p->ssn;
}

void ShowPerInfo(Person* p)
{
	printf("ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸: %d \n", p->ssn);
	printf("ì´ë¦„: %s \n", p->name);
	printf("ì£¼ì†Œ: %s \n\n", p->addr);
}

Person* MakePersonData(int ssn, char* name, char* addr)
{
	Person* newP = (Person*)malloc(sizeof(Person));
	newP->ssn = ssn;
	strcpy(newP->name, name);
	strcpy(newP->addr, addr);
	return newP;
}
```

### Slot.h
```c
#ifndef __SLOT_H__
#define __SLOT_H__

#include "Person.h"

typedef int Key;		// ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸
typedef Person* Value;

enum SlotStatus { EMPTY, DELETED, INUSE };

typedef struct _slot
{
	Key key;
	Value val;
	enum SlotStatus status;
} Slot;

#endif
```

### Table.h
```c
#ifndef __TABLE_H__
#define __TABLE_H__

#include "Slot.h"

#define MAX_TBL 100

typedef int (*HashFunc)(Key k);

typedef struct _table
{
	Slot tbl[MAX_TBL];
	HashFunc hf;
} Table;

// í…Œì´ë¸”ì˜ ì´ˆê¸°í™”
void TBLInit(Table* pt, HashFunc* f);

// í…Œì´ë¸”ì— í‚¤ì™€ ê°’ì„ ì €ì¥
void TBLInsert(Table* pt, Key k, Value v);

// í‚¤ë¥¼ ê·¼ê±°ë¡œ í…Œì´ë¸”ì—ì„œ ë°ì´í„° ì‚­ì œ
Value TBLDelete(Table* pt, Key k);

// í‚¤ë¥¼ ê·¼ê±°ë¡œ í…Œì´ë¸”ì—ì„œ ë°ì´í„° íƒìƒ‰
Value TBLSearch(Table* pt, Key k);

#endif
```

### Table.c
```c
#include <stdio.h>
#include <stdlib.h>
#include "Table.h"

void TBLInit(Table* pt, HashFunc f)
{
	int i;

	// ëª¨ë“  ìŠ¬ë¡¯ ì´ˆê¸°í™”
	for (i = 0; i < MAX_TBL; i++)
		(pt->tbl[i]).status = EMPTY;

	pt->hf = f; // í•´ì‰¬ í•¨ìˆ˜ ë“±ë¡
}

void TBLInsert(Table* pt, Key k, Value v)
{
	int hv = pt->hf(k);          // ğŸˆğŸˆë§Œì•½ ë˜‘ê°™ì€ í•´ì‰¬ ê°’ì„ ì–»ëŠ” í‚¤ë¥¼ ê°€ì§„ ê°’ì´ ì €ì¥ë˜ë©´, ê¸°ì¡´ì˜ ê°’ ìœ„ì— ìƒˆë¡œìš´ ê°’ì´ ë®ì–´ì”Œì–´ì§„ë‹¤.
	pt->tbl[hv].val = v;
	pt->tbl[hv].key = k;
	pt->tbl[hv].status = INUSE;
}

// í‚¤ë¥¼ ê·¼ê±°ë¡œ í…Œì´ë¸”ì—ì„œ ë°ì´í„° ì‚­ì œ
Value TBLDelete(Table* pt, Key k)
{
	int hv = pt->hf(k);

	if ((pt->tbl[hv]).status != INUSE)
	{
		return NULL;
	}
	else
	{
		(pt->tbl[hv]).status = DELETED;
		return (pt->tbl[hv].val);		 // ì†Œë©¸ ëŒ€ìƒì˜ ê°’ ë°˜í™˜
	}
}

// í‚¤ë¥¼ ê·¼ê±°ë¡œ í…Œì´ë¸”ì—ì„œ ë°ì´í„° íƒìƒ‰
Value TBLSearch(Table* pt, Key k)
{
	int hv = pt->hf(k);

	if ((pt->tbl[hv]).status != INUSE)  //ğŸˆğŸˆDELETED ìƒíƒœë¥¼ ê³ ë ¤í•´ì£¼ì§€ ì•ŠëŠ” ì½”ë“œ
		return NULL;
	else
		return (pt->tbl[hv]).val; // íƒìƒ‰ ëŒ€ìƒì˜ ê°’ ë°˜í™˜
}
```

### main.c
```c
#include <stdio.h>
#include <stdlib.h>
#include "Person.h"
#include "Table.h"

int MyHashFunc(int k)
{
	return k % 100;
}

int main()
{
	Table myTbl;
	Person* np;
	Person* sp;
	Person* rp;

	TBLInit(&myTbl, MyHashFunc);

	// ë°ì´í„° ì…ë ¥
	np = MakePersonData(20120003, "Lee", "Seoul");
	TBLInsert(&myTbl, GetSSN(np), np);

	np = MakePersonData(20130012, "Sun", "Bucheon");
	TBLInsert(&myTbl, GetSSN(np), np);

	np = MakePersonData(20170049, "Han", "Jeju");
	TBLInsert(&myTbl, GetSSN(np), np);

	// ë°ì´í„° íƒìƒ‰
	sp = TBLSearch(&myTbl, 20120003);
	if (sp != NULL)
		ShowPerInfo(sp);

	sp = TBLSearch(&myTbl, 20130012);
	if (sp != NULL)
		ShowPerInfo(sp);

	sp = TBLSearch(&myTbl, 20170049);
	if (sp != NULL)
		ShowPerInfo(sp);

	// ë°ì´í„° ì‚­ì œ
	rp = TBLDelete(&myTbl, 20120003);
	if (rp != NULL)
		free(rp);

	rp = TBLDelete(&myTbl, 20130012);
	if (rp != NULL)
		free(rp);

	rp = TBLDelete(&myTbl, 20170049);
	if (rp != NULL)
		free(rp);

	return 0;
}
```
```
ì¶œë ¥ê²°ê³¼

ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸: 20120003
ì´ë¦„: Lee
ì£¼ì†Œ: Seoul

ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸: 20130012
ì´ë¦„: Sun
ì£¼ì†Œ: Bucheon

ì£¼ë¯¼ë“±ë¡ë²ˆí˜¸: 20170049
ì´ë¦„: Han
ì£¼ì†Œ: Jeju
```
